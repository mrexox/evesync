#!/usr/bin/env ruby
# -*- mode: ruby -*-

require 'sysmoon/ipc'
require 'sysmoon/log'

# Creating an IPC server to accept data
server = IPC.new(
  side: :server,
  port: :datad,
  procotol: :tcp
)

server.on_recieve do |message|
  Log.info("sysdatad: #{message}")
  # ... put into database
end

loop do
  sleep 3600 # FIXME: 1 hour, rewrite better
  # zip db if needed, save backup
end
